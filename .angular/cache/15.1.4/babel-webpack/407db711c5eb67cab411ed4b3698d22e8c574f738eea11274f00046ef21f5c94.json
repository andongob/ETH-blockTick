{"ast":null,"code":"'use strict';\n\nvar _ = require('lodash');\nvar BN = require('../crypto/bn');\nvar buffer = require('buffer');\nvar bufferUtil = require('../util/buffer');\nvar JSUtil = require('../util/js');\nvar BufferWriter = require('../encoding/bufferwriter');\nvar Script = require('../script');\nvar $ = require('../util/preconditions');\nvar errors = require('../errors');\nvar MAX_SAFE_INTEGER = 0x1fffffffffffff;\nfunction Output(args) {\n  if (!(this instanceof Output)) {\n    return new Output(args);\n  }\n  if (_.isObject(args)) {\n    this.satoshis = args.satoshis;\n    if (bufferUtil.isBuffer(args.script)) {\n      this._scriptBuffer = args.script;\n    } else {\n      var script;\n      if (_.isString(args.script) && JSUtil.isHexa(args.script)) {\n        script = Buffer.from(args.script, 'hex');\n      } else {\n        script = args.script;\n      }\n      this.setScript(script);\n    }\n  } else {\n    throw new TypeError('Unrecognized argument for Output');\n  }\n}\nObject.defineProperty(Output.prototype, 'script', {\n  configurable: false,\n  enumerable: true,\n  get: function () {\n    if (this._script) {\n      return this._script;\n    } else {\n      this.setScriptFromBuffer(this._scriptBuffer);\n      return this._script;\n    }\n  }\n});\nObject.defineProperty(Output.prototype, 'satoshis', {\n  configurable: false,\n  enumerable: true,\n  get: function () {\n    return this._satoshis;\n  },\n  set: function (num) {\n    if (num instanceof BN) {\n      this._satoshisBN = num;\n      this._satoshis = num.toNumber();\n    } else if (_.isString(num)) {\n      this._satoshis = parseInt(num);\n      this._satoshisBN = BN.fromNumber(this._satoshis);\n    } else {\n      $.checkArgument(JSUtil.isNaturalNumber(num), 'Output satoshis is not a natural number');\n      this._satoshisBN = BN.fromNumber(num);\n      this._satoshis = num;\n    }\n    $.checkState(JSUtil.isNaturalNumber(this._satoshis), 'Output satoshis is not a natural number');\n  }\n});\nOutput.prototype.invalidSatoshis = function () {\n  if (this._satoshis > MAX_SAFE_INTEGER) {\n    return 'transaction txout satoshis greater than max safe integer';\n  }\n  if (this._satoshis !== this._satoshisBN.toNumber()) {\n    return 'transaction txout satoshis has corrupted value';\n  }\n  if (this._satoshis < 0) {\n    return 'transaction txout negative';\n  }\n  return false;\n};\nOutput.prototype.toObject = Output.prototype.toJSON = function toObject() {\n  var obj = {\n    satoshis: this.satoshis\n  };\n  obj.script = this._scriptBuffer.toString('hex');\n  return obj;\n};\nOutput.fromObject = function (data) {\n  return new Output(data);\n};\nOutput.prototype.setScriptFromBuffer = function (buffer) {\n  this._scriptBuffer = buffer;\n  try {\n    this._script = Script.fromBuffer(this._scriptBuffer);\n    this._script._isOutput = true;\n  } catch (e) {\n    if (e instanceof errors.Script.InvalidBuffer) {\n      this._script = null;\n    } else {\n      throw e;\n    }\n  }\n};\nOutput.prototype.setScript = function (script) {\n  if (script instanceof Script) {\n    this._scriptBuffer = script.toBuffer();\n    this._script = script;\n    this._script._isOutput = true;\n  } else if (_.isString(script)) {\n    this._script = Script.fromString(script);\n    this._scriptBuffer = this._script.toBuffer();\n    this._script._isOutput = true;\n  } else if (bufferUtil.isBuffer(script)) {\n    this.setScriptFromBuffer(script);\n  } else {\n    throw new TypeError('Invalid argument type: script');\n  }\n  return this;\n};\nOutput.prototype.inspect = function () {\n  var scriptStr;\n  if (this.script) {\n    scriptStr = this.script.inspect();\n  } else {\n    scriptStr = this._scriptBuffer.toString('hex');\n  }\n  return '<Output (' + this.satoshis + ' sats) ' + scriptStr + '>';\n};\nOutput.fromBufferReader = function (br) {\n  var obj = {};\n  obj.satoshis = br.readUInt64LEBN();\n  var size = br.readVarintNum();\n  if (size !== 0) {\n    obj.script = br.read(size);\n  } else {\n    obj.script = Buffer.from([]);\n  }\n  return new Output(obj);\n};\nOutput.prototype.toBufferWriter = function (writer) {\n  if (!writer) {\n    writer = new BufferWriter();\n  }\n  writer.writeUInt64LEBN(this._satoshisBN);\n  var script = this._scriptBuffer;\n  writer.writeVarintNum(script.length);\n  writer.write(script);\n  return writer;\n};\nmodule.exports = Output;","map":{"version":3,"names":["_","require","BN","buffer","bufferUtil","JSUtil","BufferWriter","Script","$","errors","MAX_SAFE_INTEGER","Output","args","isObject","satoshis","isBuffer","script","_scriptBuffer","isString","isHexa","Buffer","from","setScript","TypeError","Object","defineProperty","prototype","configurable","enumerable","get","_script","setScriptFromBuffer","_satoshis","set","num","_satoshisBN","toNumber","parseInt","fromNumber","checkArgument","isNaturalNumber","checkState","invalidSatoshis","toObject","toJSON","obj","toString","fromObject","data","fromBuffer","_isOutput","e","InvalidBuffer","toBuffer","fromString","inspect","scriptStr","fromBufferReader","br","readUInt64LEBN","size","readVarintNum","read","toBufferWriter","writer","writeUInt64LEBN","writeVarintNum","length","write","module","exports"],"sources":["C:/Users/Ndongo/Desktop/noborrar/Ethereum-Blocktick/node_modules/bitcore-lib/lib/transaction/output.js"],"sourcesContent":["'use strict';\r\n\r\nvar _ = require('lodash');\r\nvar BN = require('../crypto/bn');\r\nvar buffer = require('buffer');\r\nvar bufferUtil = require('../util/buffer');\r\nvar JSUtil = require('../util/js');\r\nvar BufferWriter = require('../encoding/bufferwriter');\r\nvar Script = require('../script');\r\nvar $ = require('../util/preconditions');\r\nvar errors = require('../errors');\r\n\r\nvar MAX_SAFE_INTEGER = 0x1fffffffffffff;\r\n\r\nfunction Output(args) {\r\n  if (!(this instanceof Output)) {\r\n    return new Output(args);\r\n  }\r\n  if (_.isObject(args)) {\r\n    this.satoshis = args.satoshis;\r\n    if (bufferUtil.isBuffer(args.script)) {\r\n      this._scriptBuffer = args.script;\r\n    } else {\r\n      var script;\r\n      if (_.isString(args.script) && JSUtil.isHexa(args.script)) {\r\n        script = Buffer.from(args.script, 'hex');\r\n      } else {\r\n        script = args.script;\r\n      }\r\n      this.setScript(script);\r\n    }\r\n  } else {\r\n    throw new TypeError('Unrecognized argument for Output');\r\n  }\r\n}\r\n\r\nObject.defineProperty(Output.prototype, 'script', {\r\n  configurable: false,\r\n  enumerable: true,\r\n  get: function() {\r\n    if (this._script) {\r\n      return this._script;\r\n    } else {\r\n      this.setScriptFromBuffer(this._scriptBuffer);\r\n      return this._script;\r\n    }\r\n\r\n  }\r\n});\r\n\r\nObject.defineProperty(Output.prototype, 'satoshis', {\r\n  configurable: false,\r\n  enumerable: true,\r\n  get: function() {\r\n    return this._satoshis;\r\n  },\r\n  set: function(num) {\r\n    if (num instanceof BN) {\r\n      this._satoshisBN = num;\r\n      this._satoshis = num.toNumber();\r\n    } else if (_.isString(num)) {\r\n      this._satoshis = parseInt(num);\r\n      this._satoshisBN = BN.fromNumber(this._satoshis);\r\n    } else {\r\n      $.checkArgument(\r\n        JSUtil.isNaturalNumber(num),\r\n        'Output satoshis is not a natural number'\r\n      );\r\n      this._satoshisBN = BN.fromNumber(num);\r\n      this._satoshis = num;\r\n    }\r\n    $.checkState(\r\n      JSUtil.isNaturalNumber(this._satoshis),\r\n      'Output satoshis is not a natural number'\r\n    );\r\n  }\r\n});\r\n\r\nOutput.prototype.invalidSatoshis = function() {\r\n  if (this._satoshis > MAX_SAFE_INTEGER) {\r\n    return 'transaction txout satoshis greater than max safe integer';\r\n  }\r\n  if (this._satoshis !== this._satoshisBN.toNumber()) {\r\n    return 'transaction txout satoshis has corrupted value';\r\n  }\r\n  if (this._satoshis < 0) {\r\n    return 'transaction txout negative';\r\n  }\r\n  return false;\r\n};\r\n\r\nOutput.prototype.toObject = Output.prototype.toJSON = function toObject() {\r\n  var obj = {\r\n    satoshis: this.satoshis\r\n  };\r\n  obj.script = this._scriptBuffer.toString('hex');\r\n  return obj;\r\n};\r\n\r\nOutput.fromObject = function(data) {\r\n  return new Output(data);\r\n};\r\n\r\nOutput.prototype.setScriptFromBuffer = function(buffer) {\r\n  this._scriptBuffer = buffer;\r\n  try {\r\n    this._script = Script.fromBuffer(this._scriptBuffer);\r\n    this._script._isOutput = true;\r\n  } catch(e) {\r\n    if (e instanceof errors.Script.InvalidBuffer) {\r\n      this._script = null;\r\n    } else {\r\n      throw e;\r\n    }\r\n  }\r\n};\r\n\r\nOutput.prototype.setScript = function(script) {\r\n  if (script instanceof Script) {\r\n    this._scriptBuffer = script.toBuffer();\r\n    this._script = script;\r\n    this._script._isOutput = true;\r\n  } else if (_.isString(script)) {\r\n    this._script = Script.fromString(script);\r\n    this._scriptBuffer = this._script.toBuffer();\r\n    this._script._isOutput = true;\r\n  } else if (bufferUtil.isBuffer(script)) {\r\n    this.setScriptFromBuffer(script);\r\n  } else {\r\n    throw new TypeError('Invalid argument type: script');\r\n  }\r\n  return this;\r\n};\r\n\r\nOutput.prototype.inspect = function() {\r\n  var scriptStr;\r\n  if (this.script) {\r\n    scriptStr = this.script.inspect();\r\n  } else {\r\n    scriptStr = this._scriptBuffer.toString('hex');\r\n  }\r\n  return '<Output (' + this.satoshis + ' sats) ' + scriptStr + '>';\r\n};\r\n\r\nOutput.fromBufferReader = function(br) {\r\n  var obj = {};\r\n  obj.satoshis = br.readUInt64LEBN();\r\n  var size = br.readVarintNum();\r\n  if (size !== 0) {\r\n    obj.script = br.read(size);\r\n  } else {\r\n    obj.script = Buffer.from([]);\r\n  }\r\n  return new Output(obj);\r\n};\r\n\r\nOutput.prototype.toBufferWriter = function(writer) {\r\n  if (!writer) {\r\n    writer = new BufferWriter();\r\n  }\r\n  writer.writeUInt64LEBN(this._satoshisBN);\r\n  var script = this._scriptBuffer;\r\n  writer.writeVarintNum(script.length);\r\n  writer.write(script);\r\n  return writer;\r\n};\r\n\r\nmodule.exports = Output;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}